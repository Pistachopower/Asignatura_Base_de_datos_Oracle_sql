-- ACTUALIZAR EL SALARIO CON EL NUMERO DE LETRAS QUE TIENE EL NOMBRE
-- POR EJEMPLO KING QUE TIENE CUATRO LETRAS PASA A TENER 5004 DE SALARIO
-- PERO SOLO PARA AQUELLOS DEPARTAMENTOS QUE ESTAN EN DALLAS O CHICAGO

SELECT O.PAIS,ASCII('Ñ'),ASCII('ñ'),CHR(50065),'ESPA'||CHR(50097)||'A', ¬ 
FROM OFICINAS O
WHERE UPPER(O.PAIS) LIKE '%'||CHR(50065)||'%';
--WHERE UPPER(O.PAIS) LIKE '%Ñ%';

--
SELECT *
FROM EMP E, EMP JEFE
WHERE E.MGR(+) = JEFE.EMPNO;

--RECORDEMOS COSAS DEL DELETE
DELETE
FROM EMP E; -- SOLO DE UNA TABLA Y SUELE LLEVAR WHERE

-- ES LO MISMO LO SIGUIENTE
SELECT E.*
FROM EMP E, DEPT D
WHERE E.DEPTNO = D.DEPTNO;


SELECT *
FROM EMP E
WHERE E.DEPTNO IN (SELECT D.DEPTNO FROM DEPT D);


SELECT *
FROM EMP E
WHERE E.DEPTNO = (SELECT D.DEPTNO FROM DEPT D);


-- BORRAR LOS EMPLEADOS CUYO DEPARTAMENTO ESTA EN DALLAS
SELECT * --UNA VEZ OBTENIDO LOS VALORES CAMBIO EL SELECT * POR EL DELETE
DELETE
FROM EMP E
WHERE E.DEPTNO IN (SELECT D.DEPTNO FROM DEPT D WHERE UPPER(D.LOC) = 'DALLAS');

--ERROR TIPICO
-- BORRAR LOS EMPLEADOS QUE SON CONSERJES
SELECT *
FROM EMP
WHERE UPPER(JOB) ='CLERK';

-- BORRAR EL DEPARTAMENTO DE DALLAS
--SELECT *
DELETE
FROM DEPT D
WHERE UPPER(D.LOC) = 'DALLAS';


-- SI INSERTO, INSERTO UN REGISTRO Y SI BORRO BORRO UN REGISTRO NO UN CAMPO
SELECT * FROM EMP;

INSERT INTO EMP (EMPNO, ENAME, JOB) VALUES(42,'ELVIS','DESPIERTA');

DELETE FROM EMP WHERE EMPNO = 42;

-- COMO ACTUALIZO?---> CON EL UPDATE
/*
UPDATE TABLA
    SET CAMPO = VALOR,
        .............
        CAMPO_N = VALOR_N
WHERE (CONDICIONES);
*/

UPDATE EMP
    SET DEPTNO = 10,
        SAL = 1000
WHERE UPPER(ENAME) ='ELVIS';

-- SI NO PONGO WHERE ACTUALIZO TODA LA TABLA
UPDATE EMP
    SET SAL = 1000;

-- SUBIR UN 10% A TODO DIOS
UPDATE EMP
    SET SAL = SAL + SAL *0.1;--SAL(1+0.1) = SAL *1.1

UPDATE EMP
    SET COMM = 0
WHERE COMM IS NULL;

-- ACTUALIZAR EL SALARIO CON EL NUMERO DE LETRAS QUE TIENE EL NOMBRE
-- POR EJEMPLO KING QUE TIENE CUATRO LETRAS PASA A TENER 5004 DE SALARIO
-- PERO SOLO PARA AQUELLOS DEPARTAMENTOS QUE ESTAN EN DALLAS O CHICAGO
UPDATE EMP
SET SAL = SAL +LENGTH(ENAME)
WHERE DEPTNO IN (SELECT D.DEPTNO FROM DEPT D WHERE UPPER(D.LOC) IN ('DALLAS','CHICAGO'));

SELECT E.*
FROM EMP E, DEPT D
WHERE E.DEPTNO = D.DEPTNO
AND UPPER(D.LOC) IN ('DALLAS','CHICAGO');


SELECT *
FROM EMP E
WHERE E.DEPTNO IN (SELECT D.DEPTNO FROM DEPT D WHERE UPPER(D.LOC) IN ('DALLAS','CHICAGO'));

-- OBTENER LA DESCRIPCIÓN TEXTUAL DE LAS GAMAS DE PRODUCTOS QUE HAN SIDO VENDIDOS POR EMPLEADOS QUE TIENE OFICINA EN BARCELONA